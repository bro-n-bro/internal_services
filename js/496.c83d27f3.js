"use strict";(self["webpackChunkbro_inner"]=self["webpackChunkbro_inner"]||[]).push([[496],{37115:function(e,n,t){t.r(n),t.d(n,{default:function(){return ye}});t(44114);var o=t(56768),a=t(24232),s=t(90144),l=t(45130),i=t(24113),c=t(9406),r=t(67278),u=t(61981);const d={class:"loader_wrap"},m=(0,o.Lk)("div",{class:"loader"},[(0,o.Lk)("span")],-1),k=[m];function p(e,n){return(0,o.uX)(),(0,o.CE)("div",d,k)}var v=t(71241);const f={},_=(0,v.A)(f,[["render",p]]);var b=_,g=t(38326);const h=i+"#ic_arr_ver",L=i+"#ic_check",y={class:"logo"},C=["src"],w={class:"name"},E={class:"token"},x=(0,o.Lk)("svg",{class:"arr"},[(0,o.Lk)("use",{"xlink:href":h})],-1),R={class:"mini_modal"},F={class:"scroll"},N={class:"logo"},X=["src"],K={class:"name"},$={class:"token"},J=(0,o.Lk)("svg",{class:"icon"},[(0,o.Lk)("use",{"xlink:href":L})],-1);var S={__name:"ChooseNetwork",setup(e){const n=(0,c.o)(),t=(0,s.KR)(!1),i=(0,s.KR)(null);return(0,g.X2F)(i,(e=>t.value=!1)),(e,c)=>{const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:"choose_network",ref_key:"target",ref:i},[(0,o.Lk)("button",{class:"btn",onClick:c[0]||(c[0]=(0,l.D$)((e=>t.value=!t.value),["prevent"]))},[(0,o.Lk)("div",y,[(0,o.Lk)("img",{src:(0,s.R1)(u.oB)((0,s.R1)(n).networks[(0,s.R1)(n).currentNetwork].alias),alt:""},null,8,C)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",w,(0,a.v_)((0,s.R1)(n).networks[(0,s.R1)(n).currentNetwork].name),1),(0,o.Lk)("div",E,(0,a.v_)((0,s.R1)(n).networks[(0,s.R1)(n).currentNetwork].token_name),1)]),x]),(0,o.bo)((0,o.Lk)("div",R,[(0,o.Lk)("div",F,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(n).networks,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.bF)(r,{class:(0,a.C4)(["network",{active:(0,s.R1)(n).currentNetwork==e.alias}]),to:`/multisend/${e.alias}`,onClick:c[1]||(c[1]=e=>t.value=!t.value)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",N,[(0,o.Lk)("img",{src:(0,s.R1)(u.oB)(e.alias),alt:""},null,8,X)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",K,(0,a.v_)(e.name),1),(0,o.Lk)("div",$,(0,a.v_)(e.token_name),1)]),J])),_:2},1032,["class","to"])])))),128))])],512),[[l.aG,t.value]])],512)}}};const I=S;var A=I,M=t(94348);const U=e=>((0,o.Qi)("data-v-dcbb97f4"),e=e(),(0,o.jt)(),e),V=i+"#ic_close",D=i+"#ic_arr_ver",Q={class:"page_head"},W={class:"page_title"},O=["onClick"],j=U((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":V})],-1))),q=[j],B={class:"line"},G={class:"label"},H={class:"field"},z=["onUpdate:modelValue","onInput"],P={class:"line from"},T={class:"label"},Y={class:"field"},Z=["value"],ee=U((()=>(0,o.Lk)("div",{class:"arr"},[(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":D})])],-1))),ne={class:"dropdown"},te={class:"scroll"},oe=["onClick"],ae={class:"denom"},se={class:"amount"},le={class:"line amount"},ie={class:"label"},ce={class:"field"},re=["onUpdate:modelValue","onInput","placeholder","disabled"],ue=["onClick","disabled"],de=["onClick"],me=U((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":V})],-1))),ke=[me],pe=["onClick"],ve=U((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":V})],-1))),fe=[ve],_e={class:"line add_items"},be={class:"submit"},ge={type:"submit",class:"btn submit_btn"};var he={__name:"MultisendForm",setup(e){const n=(0,c.o)(),t=(0,o.WQ)("i18n"),i=(0,r.hN)(),d=(0,s.KR)(!0),m=(0,s.KR)(!1),k=(0,s.KR)(1),p=(0,s.Kh)([{address:"",coins:[{amount:"",denom:""}]}]),v=(0,s.Kh)([{coins:[{placeholder:"0"}]}]);function f(e,t){let o=p[t].address,a=o.startsWith(n.networks[n.currentNetwork].prefix);a?e.target.classList.remove("error"):e.target.classList.add("error")}function _(e,t,o){let a=n.balances.find((e=>e.denom==p[t].coins[o].denom)),s=L(t,o);parseFloat(e.target.value.replace(",","."))>(0,u.NJ)(a.amount-s,a.base_denom)&&(p[t].coins[o].amount=((0,u.NJ)(a.amount,a.base_denom)-s).toFixed(2).toString()),e.target.value<0&&(p[t].coins[o].amount=""),y()}function g(e,t){let o=n.balances.find((n=>n.denom==p[e].coins[t].denom)),a=L(e,t);p[e].coins[t].amount=((0,u.NJ)(o.amount,o.base_denom)-a).toFixed(2).toString(),y()}function h(e,t,o){let a=n.balances.find((e=>e.denom==o));p[e].coins[t].denom=o,p[e].coins[t].amount="";let s=L(e,t);v[e].coins[t].placeholder=((0,u.NJ)(a.amount,a.base_denom)-s).toFixed(2),F()}function L(e,n){let t=0;return p.forEach(((o,a)=>{o.coins.forEach(((o,s)=>{e==a&&n==s||o.denom==p[e].coins[n].denom&&o.amount.length&&(t+=parseFloat(o.amount))}))})),t}function y(){v.forEach(((e,t)=>{e.coins.forEach(((e,o)=>{let a=n.balances.find((e=>e.denom==p[t].coins[o].denom)),s=L(t,o);e.placeholder=((0,u.NJ)(a.amount,a.base_denom)-s).toFixed(2)}))}))}function C(){for(var e=0;e<k.value;e++)p.push({address:"",coins:[{amount:"",denom:""}]}),v.push({coins:[{placeholder:"0"}]})}function w(e){p.splice(e,1),v.splice(e,1)}function E(e){p[e].coins.push({amount:"",denom:""}),v[e].coins.push({placeholder:"0"})}function x(e,n){p[e].coins.splice(n,1),v[e].coins.splice(n,1)}function R(e){F(),e.target.classList.add("active")}function F(){let e=document.querySelectorAll(".from .input");e.forEach((e=>e.classList.remove("active")))}function N(e){e.target.closest(".from")||F()}async function X(){if(m.value=!0,$()){i.notify({group:"default",duration:-100,title:t.global.t("message.notification_multisend_process")});try{let e=[{address:n.Keplr.account.address,coins:[]}],o=JSON.parse(JSON.stringify(p));p.forEach((t=>{t.coins.forEach((t=>{let o=e[0].coins.find((e=>e.denom==t.denom));o?o.amount=(parseFloat(o.amount)+parseFloat(t.amount)*Math.pow(10,n.balances.find((e=>e.denom==t.denom)).exponent)).toString():e[0].coins.push({amount:(parseFloat(t.amount)*Math.pow(10,n.balances.find((e=>e.denom==t.denom)).exponent)).toString(),denom:t.denom})}))})),o.forEach((e=>{e.coins.forEach((e=>{e.amount=(e.amount*Math.pow(10,n.balances.find((n=>n.denom==e.denom)).exponent)).toString()}))})),e[0].coins.sort(((e,n)=>e.denom>n.denom?1:e.denom<n.denom?-1:0)),o.forEach((e=>{e.coins.sort(((e,n)=>e.denom>n.denom?1:e.denom<n.denom?-1:0))}));let a={typeUrl:"/cosmos.bank.v1beta1.MsgMultiSend",value:{inputs:e,outputs:o}},s=await(0,u.Ar)([a],!0,n.currentNetwork),l=await(0,u.nw)(s);0===l.code?(i.notify({group:"default",clean:!0}),i.notify({group:"default",title:t.global.t("message.notification_multisend_success_title"),type:"success",data:{chain:n.networks[n.currentNetwork].name,tx_type:t.global.t("message.notification_multisend_action"),tx_hash:l.transactionHash}}),await n.initApp()):K(error)}catch(error){M.error(error),K(error)}}else i.notify({group:"default",clean:!0}),i.notify({group:"default",title:t.global.t("message.notification_failed_validate_title"),text:t.global.t("message.notification_failed_validate_desc"),type:"error",data:{chain:n.networks[n.currentNetwork].name}});m.value=!1}function K(e){let o=e.message.match(/code (\d+(\.\d)*)/i),a="";a=o?t.global.t(`message.notification_tx_error_${o[1]}`):t.global.t("message.notification_tx_error_rejected"),i.notify({group:"default",clean:!0}),i.notify({group:"default",title:t.global.t("message.notification_failed_title"),text:a,type:"error",data:{chain:n.networks[n.currentNetwork].name,tx_type:t.global.t("message.notification_multisend_action")}})}function $(){let e=!0;return p.forEach((n=>{if(!n.address.length)return e=!1,e;n.coins.forEach((n=>n.denom.length&&n.amount.length&&"0"!=n.amount?void 0:(e=!1,e)))})),e}return(0,o.KC)((async()=>{n.isKeplrConnected||await n.initApp(),d.value=!1})),(0,o.sV)((()=>{document.addEventListener("click",N)})),(0,o.xo)((()=>{document.removeEventListener("click",N)})),(e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",Q,[(0,o.Lk)("div",W,(0,a.v_)(e.$t("message.multisend_form_page_title",{network:(0,s.R1)(n).networks[(0,s.R1)(n).currentNetwork].name})),1),(0,o.bF)(A)]),d.value?((0,o.uX)(),(0,o.Wv)(b,{key:0})):((0,o.uX)(),(0,o.CE)("form",{key:1,action:"",class:(0,a.C4)(["form",{processing:m.value}]),onSubmit:t[3]||(t[3]=(0,l.D$)((e=>X()),["prevent"]))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(p,((i,c)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:c},[c?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"delete_btn",onClick:e=>w(c)},q,8,O)):(0,o.Q3)("",!0),(0,o.Lk)("div",B,[(0,o.Lk)("div",G,(0,a.v_)(e.$t("message.multisend_form_to_address_label")),1),(0,o.Lk)("div",H,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.address=e,class:"input",onInput:e=>f(e,c)},null,40,z),[[l.Jo,i.address]])])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.coins,((i,r)=>((0,o.uX)(),(0,o.CE)("div",{class:"columns",key:r},[(0,o.Lk)("div",P,[(0,o.Lk)("div",T,(0,a.v_)(e.$t("message.multisend_form_from_label")),1),(0,o.Lk)("div",Y,[(0,o.Lk)("input",{type:"text",value:(0,s.R1)(u.mO)((0,s.R1)(u.q0)(i.denom)),class:"input",onFocus:t[0]||(t[0]=(0,l.D$)((e=>R(e)),["self"]))},null,40,Z),ee,(0,o.Lk)("div",ne,[(0,o.Lk)("div",te,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(n).balances,((n,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},[(0,o.Lk)("button",{type:"button",class:"btn",onClick:(0,l.D$)((e=>h(c,r,n.denom)),["prevent"])},[(0,o.Lk)("div",ae,(0,a.v_)((0,s.R1)(u.mO)(n.best_denom)),1),(0,o.Lk)("div",se,[(0,s.R1)(u.NJ)(n.amount,n.base_denom)<.01?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" < 0.01 ")],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,a.v_)(e.$filters.toFixed((0,s.R1)(u.NJ)(n.amount,n.base_denom),2)),1)],64))])],8,oe)])))),128))])])])]),(0,o.Lk)("div",le,[(0,o.Lk)("div",ie,(0,a.v_)(e.$t("message.multisend_form_amount_label")),1),(0,o.Lk)("div",ce,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.amount=e,class:"input",onInput:e=>_(e,c,r),placeholder:v[c].coins[r].placeholder,disabled:!i.denom.length},null,40,re),[[l.Jo,i.amount]]),(0,o.Lk)("button",{type:"button",class:"max_btn",onClick:(0,l.D$)((e=>g(c,r)),["prevent"]),disabled:!i.denom.length},(0,a.v_)(e.$t("message.btn_max")),9,ue)])]),r?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"add_btn",onClick:e=>E(c)},ke,8,de)),r?((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",class:"delete_btn",onClick:e=>x(c,r)},fe,8,pe)):(0,o.Q3)("",!0)])))),128))])))),128)),(0,o.Lk)("div",_e,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),class:"input"},null,512),[[l.Jo,k.value]]),(0,o.Lk)("button",{type:"button",class:"btn",onClick:t[2]||(t[2]=e=>C())},(0,a.v_)(e.$t("message.btn_add")),1)]),(0,o.Lk)("div",be,[(0,o.Lk)("button",ge,(0,a.v_)(e.$t("message.btn_send")),1)])],34))],64))}};const Le=(0,v.A)(he,[["__scopeId","data-v-dcbb97f4"]]);var ye=Le}}]);
//# sourceMappingURL=496.c83d27f3.js.map