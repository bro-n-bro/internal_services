"use strict";(self["webpackChunkinternal_services"]=self["webpackChunkinternal_services"]||[]).push([[736],{51736:function(e,t,n){n.r(t),n.d(t,{default:function(){return Fe}});n(44114);var o=n(56768),a=n(24232),s=n(90144),l=n(45130),i=n(24113),c=n(9406),r=n(67278),u=n(61981);const d={class:"loader_wrap"},m=(0,o.Lk)("div",{class:"loader"},[(0,o.Lk)("span")],-1),k=[m];function v(e,t){return(0,o.uX)(),(0,o.CE)("div",d,k)}var p=n(71241);const f={},_=(0,p.A)(f,[["render",v]]);var b=_,g=n(38326);const L=i+"#ic_arr_ver",h=i+"#ic_check",C={class:"logo"},y=["src"],w={class:"name"},E={class:"token"},R=(0,o.Lk)("svg",{class:"arr"},[(0,o.Lk)("use",{"xlink:href":L})],-1),x={class:"mini_modal"},N={class:"scroll"},X={class:"logo"},$=["src"],K={class:"name"},F={class:"token"},M=(0,o.Lk)("svg",{class:"icon"},[(0,o.Lk)("use",{"xlink:href":h})],-1);var S={__name:"ChooseNetwork",setup(e){const t=(0,c.o)(),n=(0,s.KR)(!1),i=(0,s.KR)(null);return(0,g.X2F)(i,(e=>n.value=!1)),(e,c)=>{const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:"choose_network",ref_key:"target",ref:i},[(0,o.Lk)("button",{class:"btn",onClick:c[0]||(c[0]=(0,l.D$)((e=>n.value=!n.value),["prevent"]))},[(0,o.Lk)("div",C,[(0,o.Lk)("img",{src:(0,s.R1)(u.oB)((0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].alias),alt:""},null,8,y)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",w,(0,a.v_)((0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].name),1),(0,o.Lk)("div",E,(0,a.v_)((0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].token_name),1)]),R]),(0,o.bo)((0,o.Lk)("div",x,[(0,o.Lk)("div",N,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(t).networks,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.bF)(r,{class:(0,a.C4)(["network",{active:(0,s.R1)(t).currentNetwork==e.alias}]),to:`/multisend/${e.alias}`,onClick:c[1]||(c[1]=e=>n.value=!n.value)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",X,[(0,o.Lk)("img",{src:(0,s.R1)(u.oB)(e.alias),alt:""},null,8,$)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",K,(0,a.v_)(e.name),1),(0,o.Lk)("div",F,(0,a.v_)(e.token_name),1)]),M])),_:2},1032,["class","to"])])))),128))])],512),[[l.aG,n.value]])],512)}}};const J=S;var I=J,Q=n(94348);const W=e=>((0,o.Qi)("data-v-07b86ea9"),e=e(),(0,o.jt)(),e),D=i+"#ic_close",A={class:"modal",id:"deposit_modal"},U={class:"data"},V=W((()=>(0,o.Lk)("svg",{class:"icon"},[(0,o.Lk)("use",{"xlink:href":D})],-1))),O=[V],j=W((()=>(0,o.Lk)("div",{class:"overlay"},null,-1)));var q={__name:"MultisendConfirm",props:["data"],setup(e){const t=(0,c.o)(),n=(0,o.WQ)("i18n"),i=(0,r.hN)(),d=(0,o.WQ)("emitter"),m=e;async function k(){d.emit("closeMultisendConfirmModal",{status:!0}),i.notify({group:"default",duration:-100,title:n.global.t("message.notification_multisend_process")});try{let e=[{address:t.Keplr.account.address,coins:[]}],o=JSON.parse(JSON.stringify(m.data));m.data.forEach((n=>{n.coins.forEach((n=>{let o=e[0].coins.find((e=>e.denom==n.denom));o?o.amount=(parseFloat(o.amount)+parseFloat(n.amount)*Math.pow(10,t.balances.find((e=>e.denom==n.denom)).exponent)).toString():e[0].coins.push({amount:(parseFloat(n.amount)*Math.pow(10,t.balances.find((e=>e.denom==n.denom)).exponent)).toString(),denom:n.denom})}))})),o.forEach((e=>{e.coins.forEach((e=>{e.amount=(e.amount*Math.pow(10,t.balances.find((t=>t.denom==e.denom)).exponent)).toString()}))})),e[0].coins.sort(((e,t)=>e.denom>t.denom?1:e.denom<t.denom?-1:0)),o.forEach((e=>{e.coins.sort(((e,t)=>e.denom>t.denom?1:e.denom<t.denom?-1:0))}));let a={typeUrl:"/cosmos.bank.v1beta1.MsgMultiSend",value:{inputs:e,outputs:o}},s=await(0,u.Ar)([a],!0,t.currentNetwork),l=await(0,u.nw)(s);0===l.code?(i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_multisend_success_title"),type:"success",data:{chain:t.networks[t.currentNetwork].name,tx_type:n.global.t("message.notification_multisend_action"),tx_hash:l.transactionHash}}),await t.initApp()):v(error)}catch(error){Q.error(error),v(error)}}function v(e){let o=e.message.match(/code (\d+(\.\d)*)/i),a="";a=o?n.global.t(`message.notification_tx_error_${o[1]}`):n.global.t("message.notification_tx_error_rejected"),i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_failed_title"),text:a,type:"error",data:{chain:t.networks[t.currentNetwork].name,tx_type:n.global.t("message.notification_multisend_action")}})}return(t,n)=>((0,o.uX)(),(0,o.CE)("section",A,[(0,o.Lk)("div",{class:"modal_content",onClick:n[2]||(n[2]=(0,l.D$)((e=>(0,s.R1)(d).emit("closeMultisendConfirmModal",{status:!1})),["self"]))},[(0,o.Lk)("div",U,[(0,o.Lk)("button",{class:"close_btn",onClick:n[0]||(n[0]=(0,l.D$)((e=>(0,s.R1)(d).emit("closeMultisendConfirmModal",{status:!1})),["prevent"]))},O),(0,o.Lk)("pre",null,(0,a.v_)(e.data),1),(0,o.Lk)("button",{class:"confirm_btn",onClick:n[1]||(n[1]=(0,l.D$)((e=>k()),["prevent"]))},(0,a.v_)(t.$t("message.btn_confirm")),1)])]),j]))}};const B=(0,p.A)(q,[["__scopeId","data-v-07b86ea9"]]);var G=B;const H=e=>((0,o.Qi)("data-v-13b5159e"),e=e(),(0,o.jt)(),e),T=i+"#ic_close",z=i+"#ic_arr_ver",P={class:"page_head"},Y={class:"page_title"},Z=["onClick"],ee=H((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":T})],-1))),te=[ee],ne={class:"line"},oe={class:"label"},ae={class:"field"},se=["onUpdate:modelValue","onInput"],le={class:"line from"},ie={class:"label"},ce={class:"field"},re=["value"],ue=H((()=>(0,o.Lk)("div",{class:"arr"},[(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":z})])],-1))),de={class:"dropdown"},me={class:"scroll"},ke=["onClick"],ve={class:"denom"},pe={class:"amount"},fe={class:"line amount"},_e={class:"label"},be={class:"field"},ge=["onUpdate:modelValue","onInput","placeholder","disabled"],Le=["onClick","disabled"],he=["onClick"],Ce=H((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":T})],-1))),ye=[Ce],we=["onClick"],Ee=H((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":T})],-1))),Re=[Ee],xe={class:"line add_items"},Ne={class:"submit"},Xe={type:"submit",class:"btn submit_btn"};var $e={__name:"Multisend",setup(e){const t=(0,c.o)(),n=(0,o.WQ)("i18n"),i=(0,r.hN)(),d=(0,o.WQ)("emitter"),m=(0,s.KR)(!0),k=(0,s.KR)(!1),v=(0,s.KR)(1),p=(0,s.KR)(!1),f=(0,s.Kh)([{address:"",coins:[{amount:"",denom:""}]}]),_=(0,s.Kh)([{coins:[{placeholder:"0"}]}]);function g(e,n){let o=f[n].address,a=o.startsWith(t.networks[t.currentNetwork].prefix);a?e.target.classList.remove("error"):e.target.classList.add("error")}function L(e,n,o){let a=t.balances.find((e=>e.denom==f[n].coins[o].denom)),s=y(n,o);parseFloat(e.target.value.replace(",","."))>(0,u.NJ)(a.amount-s,a.base_denom)&&(f[n].coins[o].amount=((0,u.NJ)(a.amount,a.base_denom)-s).toString()),e.target.value<0&&(f[n].coins[o].amount=""),w()}function h(e,n){let o=t.balances.find((t=>t.denom==f[e].coins[n].denom)),a=y(e,n);f[e].coins[n].amount=((0,u.NJ)(o.amount,o.base_denom)-a).toString(),w()}function C(e,n,o,a){let s=t.balances.find((e=>e.denom==a));f[n].coins[o].denom=a,f[n].coins[o].amount="";let l=y(n,o);_[n].coins[o].placeholder=((0,u.NJ)(s.amount,s.base_denom)-l).toString(),$(),setTimeout((()=>e.target.closest(".columns").querySelector(".amount .input").focus()))}function y(e,t){let n=0;return f.forEach(((o,a)=>{o.coins.forEach(((o,s)=>{e==a&&t==s||o.denom==f[e].coins[t].denom&&o.amount.length&&(n+=parseFloat(o.amount))}))})),n}function w(){_.forEach(((e,n)=>{e.coins.forEach(((e,o)=>{let a=t.balances.find((e=>e.denom==f[n].coins[o].denom)),s=y(n,o);_[n].coins[o].placeholder=((0,u.NJ)(a.amount,a.base_denom)-s).toString()}))}))}function E(){for(var e=0;e<v.value;e++)f.push({address:"",coins:[{amount:"",denom:""}]}),_.push({coins:[{placeholder:"0"}]})}function R(e){f.splice(e,1),_.splice(e,1)}function x(e){f[e].coins.push({amount:"",denom:""}),_[e].coins.push({placeholder:"0"})}function N(e,t){f[e].coins.splice(t,1),_[e].coins.splice(t,1)}function X(e){$(),e.target.classList.add("active")}function $(){let e=document.querySelectorAll(".from .input");e.forEach((e=>e.classList.remove("active")))}function K(e){e.target.closest(".from")||$()}function F(){k.value=!0,M()?p.value=!0:(i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_failed_validate_title"),text:n.global.t("message.notification_failed_validate_desc"),type:"error",data:{chain:t.networks[t.currentNetwork].name}}),k.value=!1)}function M(){let e=!0;return f.forEach((t=>{if(!t.address.length)return e=!1,e;t.coins.forEach((t=>t.denom.length&&t.amount.length&&"0"!=t.amount?void 0:(e=!1,e)))})),e}return(0,o.KC)((async()=>{t.isKeplrConnected||await t.initApp(),m.value=!1})),(0,o.sV)((()=>{document.addEventListener("click",K)})),(0,o.xo)((()=>{document.removeEventListener("click",K)})),d.on("closeMultisendConfirmModal",(({status:e})=>{p.value=!1,k.value=e})),(e,n)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",P,[(0,o.Lk)("div",Y,(0,a.v_)(e.$t("message.multisend_page_title",{network:(0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].name})),1),(0,o.bF)(I)]),m.value?((0,o.uX)(),(0,o.Wv)(b,{key:0})):((0,o.uX)(),(0,o.CE)("form",{key:1,action:"",class:(0,a.C4)(["form",{processing:k.value}]),onSubmit:n[3]||(n[3]=(0,l.D$)((e=>F()),["prevent"]))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f,((i,c)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:c},[c?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"delete_btn",onClick:e=>R(c)},te,8,Z)):(0,o.Q3)("",!0),(0,o.Lk)("div",ne,[(0,o.Lk)("div",oe,(0,a.v_)(e.$t("message.multisend_form_to_address_label")),1),(0,o.Lk)("div",ae,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.address=e,class:"input",onInput:e=>g(e,c)},null,40,se),[[l.Jo,i.address]])])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.coins,((i,r)=>((0,o.uX)(),(0,o.CE)("div",{class:"columns",key:r},[(0,o.Lk)("div",le,[(0,o.Lk)("div",ie,(0,a.v_)(e.$t("message.multisend_form_from_label")),1),(0,o.Lk)("div",ce,[(0,o.Lk)("input",{type:"text",value:(0,s.R1)(u.mO)((0,s.R1)(u.q0)(i.denom)),class:"input",onFocus:n[0]||(n[0]=(0,l.D$)((e=>X(e)),["self"]))},null,40,re),ue,(0,o.Lk)("div",de,[(0,o.Lk)("div",me,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(t).balances,((t,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n},[(0,o.Lk)("button",{type:"button",class:"btn",onClick:(0,l.D$)((e=>C(e,c,r,t.denom)),["prevent"])},[(0,o.Lk)("div",ve,(0,a.v_)((0,s.R1)(u.mO)(t.best_denom)),1),(0,o.Lk)("div",pe,[(0,s.R1)(u.NJ)(t.amount,t.base_denom)<.01?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" < 0.01 ")],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,a.v_)(e.$filters.toFixed((0,s.R1)(u.NJ)(t.amount,t.base_denom),2)),1)],64))])],8,ke)])))),128))])])])]),(0,o.Lk)("div",fe,[(0,o.Lk)("div",_e,(0,a.v_)(e.$t("message.multisend_form_amount_label")),1),(0,o.Lk)("div",be,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.amount=e,class:"input",onInput:e=>L(e,c,r),placeholder:_[c].coins[r].placeholder,disabled:!i.denom.length},null,40,ge),[[l.Jo,i.amount]]),(0,o.Lk)("button",{type:"button",class:"max_btn",onClick:(0,l.D$)((e=>h(c,r)),["prevent"]),disabled:!i.denom.length},(0,a.v_)(e.$t("message.btn_max")),9,Le)])]),r?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"add_btn",onClick:e=>x(c)},ye,8,he)),r?((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",class:"delete_btn",onClick:e=>N(c,r)},Re,8,we)):(0,o.Q3)("",!0)])))),128))])))),128)),(0,o.Lk)("div",xe,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=e=>v.value=e),class:"input"},null,512),[[l.Jo,v.value]]),(0,o.Lk)("button",{type:"button",class:"btn",onClick:n[2]||(n[2]=e=>E())},(0,a.v_)(e.$t("message.btn_add")),1)]),(0,o.Lk)("div",Ne,[(0,o.Lk)("button",Xe,(0,a.v_)(e.$t("message.btn_send")),1)])],34)),p.value?((0,o.uX)(),(0,o.Wv)(G,{key:2,data:f},null,8,["data"])):(0,o.Q3)("",!0)],64))}};const Ke=(0,p.A)($e,[["__scopeId","data-v-13b5159e"]]);var Fe=Ke}}]);
//# sourceMappingURL=736.5dbb721f.js.map