"use strict";(self["webpackChunkinternal_services"]=self["webpackChunkinternal_services"]||[]).push([[519],{66951:function(e,t,n){n.d(t,{A:function(){return d}});var o=n(56768);const s={class:"loader_wrap"},a=(0,o.Lk)("div",{class:"loader"},[(0,o.Lk)("span")],-1),l=[a];function i(e,t){return(0,o.uX)(),(0,o.CE)("div",s,l)}var c=n(71241);const r={},u=(0,c.A)(r,[["render",i]]);var d=u},94519:function(e,t,n){n.r(t),n.d(t,{default:function(){return Me}});n(44114);var o=n(56768),s=n(24232),a=n(90144),l=n(45130),i=n(24113),c=n(43189),r=n(67278),u=n(61981),d=n(66951),m=n(38326);const k=i+"#ic_arr_ver",v=i+"#ic_check",p={class:"logo"},f=["src"],_={class:"name"},b={class:"token"},L=(0,o.Lk)("svg",{class:"arr"},[(0,o.Lk)("use",{"xlink:href":k})],-1),g={class:"mini_modal"},h={class:"scroll"},C={class:"logo"},y=["src"],w={class:"name"},E={class:"token"},R=(0,o.Lk)("svg",{class:"icon"},[(0,o.Lk)("use",{"xlink:href":v})],-1);var x={__name:"ChooseNetwork",setup(e){const t=(0,c.o)(),n=(0,a.KR)(!1),i=(0,a.KR)(null);return(0,m.X2F)(i,(e=>n.value=!1)),(e,c)=>{const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:"choose_network",ref_key:"target",ref:i},[(0,o.Lk)("button",{class:"btn",onClick:c[0]||(c[0]=(0,l.D$)((e=>n.value=!n.value),["prevent"]))},[(0,o.Lk)("div",p,[(0,o.Lk)("img",{src:(0,a.R1)(u.oB)((0,a.R1)(t).networks[(0,a.R1)(t).currentNetwork].alias),alt:""},null,8,f)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",_,(0,s.v_)((0,a.R1)(t).networks[(0,a.R1)(t).currentNetwork].name),1),(0,o.Lk)("div",b,(0,s.v_)((0,a.R1)(t).networks[(0,a.R1)(t).currentNetwork].token_name),1)]),L]),(0,o.bo)((0,o.Lk)("div",g,[(0,o.Lk)("div",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,a.R1)(t).networks,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.bF)(r,{class:(0,s.C4)(["network",{active:(0,a.R1)(t).currentNetwork==e.alias}]),to:`/multisend/${e.alias}`,onClick:c[1]||(c[1]=e=>n.value=!n.value)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",C,[(0,o.Lk)("img",{src:(0,a.R1)(u.oB)(e.alias),alt:""},null,8,y)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",w,(0,s.v_)(e.name),1),(0,o.Lk)("div",E,(0,s.v_)(e.token_name),1)]),R])),_:2},1032,["class","to"])])))),128))])],512),[[l.aG,n.value]])],512)}}};const X=x;var K=X,N=n(94348);const F=e=>((0,o.Qi)("data-v-c266d9a2"),e=e(),(0,o.jt)(),e),$=i+"#ic_close",M={class:"modal",id:"deposit_modal"},I={class:"data"},J=F((()=>(0,o.Lk)("svg",{class:"icon"},[(0,o.Lk)("use",{"xlink:href":$})],-1))),S=[J],W=F((()=>(0,o.Lk)("div",{class:"titles"},[(0,o.Lk)("div",{class:"col_address"},"Sender")],-1))),A={class:"sender"},Q=F((()=>(0,o.Lk)("div",{class:"titles"},[(0,o.Lk)("div",{class:"col_address"},"Recipient"),(0,o.Lk)("div",{class:"col_denom"},"Denom"),(0,o.Lk)("div",{class:"col_amount"},"Amount")],-1))),D={class:"col_address"},U={class:"col_denom"},V={class:"col_amount"},B=F((()=>(0,o.Lk)("div",{class:"overlay"},null,-1)));var O={__name:"MultisendConfirm",props:["data"],setup(e){const t=(0,c.o)(),n=(0,o.WQ)("i18n"),i=(0,r.hN)(),d=(0,o.WQ)("emitter"),m=e;async function k(){d.emit("closeMultisendConfirmModal",{status:!0}),i.notify({group:"default",duration:-100,title:n.global.t("message.notification_multisend_process")});try{let e=[{address:t.Keplr.account.address,coins:[]}],o=JSON.parse(JSON.stringify(m.data));m.data.forEach((n=>{n.coins.forEach((n=>{let o=e[0].coins.find((e=>e.denom==n.denom));o?o.amount=(parseFloat(o.amount)+parseFloat(n.amount)*Math.pow(10,t.balances.find((e=>e.denom==n.denom)).exponent)).toString():e[0].coins.push({amount:parseInt(parseFloat(n.amount)*Math.pow(10,t.balances.find((e=>e.denom==n.denom)).exponent)).toString(),denom:n.denom})}))})),o.forEach((e=>{e.coins.forEach((e=>{e.amount=parseInt(e.amount*Math.pow(10,t.balances.find((t=>t.denom==e.denom)).exponent)).toString()}))})),e[0].coins.sort(((e,t)=>e.denom>t.denom?1:e.denom<t.denom?-1:0)),o.forEach((e=>{e.coins.sort(((e,t)=>e.denom>t.denom?1:e.denom<t.denom?-1:0))}));let s={typeUrl:"/cosmos.bank.v1beta1.MsgMultiSend",value:{inputs:e,outputs:o}},a=await(0,u.nw)([s],t.currentNetwork);0===a.code?(i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_multisend_success_title"),type:"success",data:{chain:t.networks[t.currentNetwork].name,tx_type:n.global.t("message.notification_multisend_action"),tx_hash:"bostrom"!=t.networks[t.currentNetwork].prefix?a.transactionHash:null}}),d.emit("updateBalances")):v(error)}catch(error){N.error(error),v(error)}d.emit("closeMultisendConfirmModal",{status:!1})}function v(e){let o=e.message.match(/code (\d+(\.\d)*)/i),s="";s=o?n.global.t(`message.notification_tx_error_${o[1]}`):n.global.t("message.notification_tx_error_rejected"),i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_failed_title"),text:s,type:"error",data:{chain:t.networks[t.currentNetwork].name,tx_type:n.global.t("message.notification_multisend_action")}})}return(n,i)=>((0,o.uX)(),(0,o.CE)("section",M,[(0,o.Lk)("div",{class:"modal_content",onClick:i[2]||(i[2]=(0,l.D$)((e=>(0,a.R1)(d).emit("closeMultisendConfirmModal",{status:!1})),["self"]))},[(0,o.Lk)("div",I,[(0,o.Lk)("button",{class:"close_btn",onClick:i[0]||(i[0]=(0,l.D$)((e=>(0,a.R1)(d).emit("closeMultisendConfirmModal",{status:!1})),["prevent"]))},S),W,(0,o.Lk)("div",A,(0,s.v_)((0,a.R1)(t).Keplr.account.address),1),Q,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.data,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"recipient",key:n.itemIndex},[(0,o.Lk)("div",D,(0,s.v_)(e.address),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.coins,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"coins",key:n.coinIndex},[(0,o.Lk)("div",U,(0,s.v_)((0,a.R1)(u.mO)(e.denom)),1),(0,o.Lk)("div",V,(0,s.v_)(e.amount),1)])))),128))])))),128)),(0,o.Lk)("button",{class:"confirm_btn",onClick:i[1]||(i[1]=(0,l.D$)((e=>k()),["prevent"]))},(0,s.v_)(n.$t("message.btn_confirm")),1)])]),B]))}},j=n(71241);const q=(0,j.A)(O,[["__scopeId","data-v-c266d9a2"]]);var G=q;const H=e=>((0,o.Qi)("data-v-5e55e0f5"),e=e(),(0,o.jt)(),e),T=i+"#ic_close",z=i+"#ic_arr_ver",P={class:"page_head"},Y={class:"page_title"},Z=["onClick"],ee=H((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":T})],-1))),te=[ee],ne={class:"line"},oe={class:"label"},se={class:"field"},ae=["onUpdate:modelValue","onInput"],le={class:"line from"},ie={class:"label"},ce={class:"field"},re=["value"],ue=H((()=>(0,o.Lk)("div",{class:"arr"},[(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":z})])],-1))),de={class:"dropdown"},me={class:"scroll"},ke=["onClick"],ve={class:"denom"},pe={class:"amount"},fe={class:"price"},_e={class:"line amount"},be={class:"label"},Le={class:"field"},ge=["onUpdate:modelValue","onInput","placeholder","disabled"],he=["onClick","disabled"],Ce=["onClick"],ye=H((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":T})],-1))),we=[ye],Ee=["onClick"],Re=H((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":T})],-1))),xe=[Re],Xe={class:"line add_items"},Ke={class:"submit"},Ne={type:"submit",class:"btn submit_btn"};var Fe={__name:"Multisend",setup(e){const t=(0,c.o)(),n=(0,o.WQ)("i18n"),i=(0,r.hN)(),m=(0,o.WQ)("emitter"),k=(0,a.KR)(!0),v=(0,a.KR)(!1),p=(0,a.KR)(1),f=(0,a.KR)(!1);var _=(0,a.Kh)([{address:"",coins:[{amount:"",denom:""}]}]),b=(0,a.Kh)([{coins:[{placeholder:"0"}]}]);function L(e,n){let o=_[n].address,s=o.startsWith(t.networks[t.currentNetwork].prefix);s?e.target.classList.remove("error"):e.target.classList.add("error")}function g(e,n,o){let s=t.balances.find((e=>e.denom==_[n].coins[o].denom)),a=y(n,o);parseFloat(e.target.value.replace(",","."))>(0,u.NJ)(s.amount-a,s.base_denom)&&(_[n].coins[o].amount=((0,u.NJ)(s.amount,s.base_denom)-a).toString()),e.target.value<0&&(_[n].coins[o].amount=""),w()}function h(e,n){let o=t.balances.find((t=>t.denom==_[e].coins[n].denom)),s=y(e,n);_[e].coins[n].amount=((0,u.NJ)(o.amount,o.base_denom)-s).toString(),w()}function C(e,n,o,s){let a=t.balances.find((e=>e.denom==s));_[n].coins[o].denom=s,_[n].coins[o].amount="";let l=y(n,o);b[n].coins[o].placeholder=(0,u.NJ)(a.amount,a.base_denom)-l,F(),setTimeout((()=>e.target.closest(".columns").querySelector(".amount .input").focus()))}function y(e,t){let n=0;return _.forEach(((o,s)=>{o.coins.forEach(((o,a)=>{e==s&&t==a||o.denom==_[e].coins[t].denom&&o.amount.length&&(n+=parseFloat(o.amount))}))})),n}function w(){b.forEach(((e,n)=>{e.coins.forEach(((e,o)=>{let s=t.balances.find((e=>e.denom==_[n].coins[o].denom)),a=y(n,o);b[n].coins[o].placeholder=(0,u.NJ)(s.amount,s.base_denom)-a}))}))}function E(){for(var e=0;e<p.value;e++)_.push({address:"",coins:[{amount:"",denom:""}]}),b.push({coins:[{placeholder:"0"}]})}function R(e){_.splice(e,1),b.splice(e,1)}function x(e){_[e].coins.push({amount:"",denom:""}),b[e].coins.push({placeholder:"0"})}function X(e,t){_[e].coins.splice(t,1),b[e].coins.splice(t,1)}function N(e){F(),e.target.classList.add("active")}function F(){let e=document.querySelectorAll(".from .input");e.forEach((e=>e.classList.remove("active")))}function $(e){e.target.closest(".from")||F()}function M(){v.value=!0,I()?f.value=!0:(i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_failed_validate_title"),text:n.global.t("message.notification_failed_validate_desc"),type:"error",data:{chain:t.networks[t.currentNetwork].name}}),v.value=!1)}function I(){let e=!0;return _.forEach((t=>{if(!t.address.length)return e=!1,e;t.coins.forEach((t=>t.denom.length&&t.amount.length&&"0"!=t.amount?void 0:(e=!1,e)))})),e}return(0,o.KC)((async()=>{t.isKeplrConnected||await t.initApp(),k.value=!1})),(0,o.wB)((0,o.EW)((()=>t.currentNetwork)),(async()=>{k.value=!0,_=(0,a.Kh)([{address:"",coins:[{amount:"",denom:""}]}]),b=(0,a.Kh)([{coins:[{placeholder:"0"}]}]),await t.initApp(),k.value=!1})),(0,o.sV)((()=>{document.addEventListener("click",$)})),(0,o.xo)((()=>{document.removeEventListener("click",$)})),m.on("updateBalances",(async()=>{k.value=!0,await t.initApp(),k.value=!1})),m.on("closeMultisendConfirmModal",(({status:e})=>{f.value=!1,v.value=e})),(e,n)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",P,[(0,o.Lk)("div",Y,(0,s.v_)(e.$t("message.multisend_page_title",{network:(0,a.R1)(t).networks[(0,a.R1)(t).currentNetwork].name})),1),(0,o.bF)(K)]),k.value?((0,o.uX)(),(0,o.Wv)(d.A,{key:0})):((0,o.uX)(),(0,o.CE)("form",{key:1,action:"",class:(0,s.C4)(["form",{processing:v.value}]),onSubmit:n[3]||(n[3]=(0,l.D$)((e=>M()),["prevent"]))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,a.R1)(_),((i,c)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:c},[c?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"delete_btn",onClick:e=>R(c)},te,8,Z)):(0,o.Q3)("",!0),(0,o.Lk)("div",ne,[(0,o.Lk)("div",oe,(0,s.v_)(e.$t("message.multisend_form_to_address_label")),1),(0,o.Lk)("div",se,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.address=e,class:"input",onInput:e=>L(e,c)},null,40,ae),[[l.Jo,i.address]])])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.coins,((i,r)=>((0,o.uX)(),(0,o.CE)("div",{class:"columns",key:r},[(0,o.Lk)("div",le,[(0,o.Lk)("div",ie,(0,s.v_)(e.$t("message.multisend_form_from_label")),1),(0,o.Lk)("div",ce,[(0,o.Lk)("input",{type:"text",value:(0,a.R1)(u.mO)(i.denom),class:"input",onFocus:n[0]||(n[0]=(0,l.D$)((e=>N(e)),["self"]))},null,40,re),ue,(0,o.Lk)("div",de,[(0,o.Lk)("div",me,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,a.R1)(t).balances,((t,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n},[(0,o.Lk)("button",{type:"button",class:"btn",onClick:(0,l.D$)((e=>C(e,c,r,t.denom)),["prevent"])},[(0,o.Lk)("div",ve,(0,s.v_)((0,a.R1)(u.mO)(t.denom)),1),(0,o.Lk)("div",pe,[(0,a.R1)(u.NJ)(t.amount,t.base_denom)<.01?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" < 0.01 ")],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)((0,s.v_)(e.$filters.toFixed((0,a.R1)(u.NJ)(t.amount,t.base_denom),2)),1)],64))]),(0,o.Lk)("div",fe,[t.cost<.01?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" (< 0.01$) ")],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.eW)(" ("+(0,s.v_)(e.$filters.toFixed(t.cost,2))+"$) ",1)],64))])],8,ke)])))),128))])])])]),(0,o.Lk)("div",_e,[(0,o.Lk)("div",be,(0,s.v_)(e.$t("message.multisend_form_amount_label")),1),(0,o.Lk)("div",Le,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.amount=e,class:"input",onInput:e=>g(e,c,r),placeholder:(0,a.R1)(b)[c].coins[r].placeholder,disabled:!i.denom.length},null,40,ge),[[l.Jo,i.amount]]),(0,o.Lk)("button",{type:"button",class:"max_btn",onClick:(0,l.D$)((e=>h(c,r)),["prevent"]),disabled:!i.denom.length},(0,s.v_)(e.$t("message.btn_max")),9,he)])]),r?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"add_btn",onClick:e=>x(c)},we,8,Ce)),r?((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",class:"delete_btn",onClick:e=>X(c,r)},xe,8,Ee)):(0,o.Q3)("",!0)])))),128))])))),128)),(0,o.Lk)("div",Xe,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),class:"input"},null,512),[[l.Jo,p.value]]),(0,o.Lk)("button",{type:"button",class:"btn",onClick:n[2]||(n[2]=e=>E())},(0,s.v_)(e.$t("message.btn_add")),1)]),(0,o.Lk)("div",Ke,[(0,o.Lk)("button",Ne,(0,s.v_)(e.$t("message.btn_send")),1)])],34)),f.value?((0,o.uX)(),(0,o.Wv)(G,{key:2,data:(0,a.R1)(_)},null,8,["data"])):(0,o.Q3)("",!0)],64))}};const $e=(0,j.A)(Fe,[["__scopeId","data-v-5e55e0f5"]]);var Me=$e}}]);
//# sourceMappingURL=519.44745fd7.js.map