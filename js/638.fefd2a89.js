"use strict";(self["webpackChunkbro_inner"]=self["webpackChunkbro_inner"]||[]).push([[638],{10638:function(e,t,n){n.r(t),n.d(t,{default:function(){return ye}});n(44114);var o=n(56768),a=n(24232),s=n(90144),l=n(45130),i=n(24113),r=n(9406),c=n(67278),u=n(61981);const d={class:"loader_wrap"},m=(0,o.Lk)("div",{class:"loader"},[(0,o.Lk)("span")],-1),k=[m];function v(e,t){return(0,o.uX)(),(0,o.CE)("div",d,k)}var p=n(71241);const _={},f=(0,p.A)(_,[["render",v]]);var b=f,g=n(38326);const L=i+"#ic_arr_ver",h=i+"#ic_check",y={class:"logo"},C=["src"],w={class:"name"},E={class:"token"},x=(0,o.Lk)("svg",{class:"arr"},[(0,o.Lk)("use",{"xlink:href":L})],-1),R={class:"mini_modal"},X={class:"scroll"},F={class:"logo"},K=["src"],$={class:"name"},N={class:"token"},I=(0,o.Lk)("svg",{class:"icon"},[(0,o.Lk)("use",{"xlink:href":h})],-1);var U={__name:"ChooseNetwork",setup(e){const t=(0,r.o)(),n=(0,s.KR)(!1),i=(0,s.KR)(null);return(0,g.X2F)(i,(e=>n.value=!1)),(e,r)=>{const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",{class:"choose_network",ref_key:"target",ref:i},[(0,o.Lk)("button",{class:"btn",onClick:r[0]||(r[0]=(0,l.D$)((e=>n.value=!n.value),["prevent"]))},[(0,o.Lk)("div",y,[(0,o.Lk)("img",{src:(0,s.R1)(u.oB)((0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].alias),alt:""},null,8,C)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",w,(0,a.v_)((0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].name),1),(0,o.Lk)("div",E,(0,a.v_)((0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].token_name),1)]),x]),(0,o.bo)((0,o.Lk)("div",R,[(0,o.Lk)("div",X,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(t).networks,((e,l)=>((0,o.uX)(),(0,o.CE)("div",{key:l},[(0,o.bF)(c,{class:(0,a.C4)(["network",{active:(0,s.R1)(t).currentNetwork==e.alias}]),to:`/multisend/${e.alias}`,onClick:r[1]||(r[1]=e=>n.value=!n.value)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",F,[(0,o.Lk)("img",{src:(0,s.R1)(u.oB)(e.alias),alt:""},null,8,K)]),(0,o.Lk)("div",null,[(0,o.Lk)("div",$,(0,a.v_)(e.name),1),(0,o.Lk)("div",N,(0,a.v_)(e.token_name),1)]),I])),_:2},1032,["class","to"])])))),128))])],512),[[l.aG,n.value]])],512)}}};const V=U;var S=V,A=n(94348);const D=e=>((0,o.Qi)("data-v-5c72beb0"),e=e(),(0,o.jt)(),e),J=i+"#ic_close",Q=i+"#ic_arr_ver",M={class:"page_head"},W={class:"page_title"},j=["onClick"],B=D((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":J})],-1))),q=[B],G={class:"line"},H={class:"label"},O={class:"field"},z=["onUpdate:modelValue","onInput"],P={class:"line from"},T={class:"label"},Y={class:"field"},Z=["onUpdate:modelValue"],ee=D((()=>(0,o.Lk)("div",{class:"arr"},[(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":Q})])],-1))),te={class:"dropdown"},ne={class:"scroll"},oe=["onClick"],ae={class:"denom"},se={class:"amount"},le={class:"line amount"},ie={class:"label"},re={class:"field"},ce=["onUpdate:modelValue","onInput","placeholder","disabled"],ue=["onClick","disabled"],de=["onClick"],me=D((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":J})],-1))),ke=[me],ve=["onClick"],pe=D((()=>(0,o.Lk)("svg",null,[(0,o.Lk)("use",{"xlink:href":J})],-1))),_e=[pe],fe={class:"line add_items"},be={class:"submit"},ge={type:"submit",class:"btn submit_btn"};var Le={__name:"MultisendForm",setup(e){const t=(0,r.o)(),n=(0,o.WQ)("i18n"),i=(0,c.hN)(),d=(0,s.KR)(!0),m=(0,s.KR)(!1),k=(0,s.KR)(1),v=(0,s.Kh)([{address:"",coins:[{amount:"",denom:""}]}]);function p(e,n){let o=v[n].address,a=o.startsWith(t.networks[t.currentNetwork].prefix);a?e.target.classList.remove("error"):e.target.classList.add("error")}function _(e,n,o){let a=t.balances.find((e=>e.denom==v[n].coins[o].denom)),s=g(n,o);parseFloat(e.target.value.replace(",","."))>a.amount-s&&(v[n].coins[o].amount=(a.amount-s).toString()),e.target.value<0&&(v[n].coins[o].amount="")}function f(e,n){let o=t.balances.find((t=>t.denom==v[e].coins[n].denom)),a=g(e,n);v[e].coins[n].amount=(o.amount-a).toString()}function g(e,t){let n=0;return v.forEach(((o,a)=>{o.coins.forEach(((o,s)=>{e==a&&t==s||o.amount.length&&(n+=parseFloat(o.amount))}))})),n}function L(e,n,o){let a=t.balances.find((e=>e.denom==o)),s=g(e,n);v[e].coins[n].denom=o,v[e].coins[n].amount="",v[e].coins[n].placeholder=a.amount-s,x()}function h(){for(var e=0;e<k.value;e++)v.push({address:"",coins:[{amount:"",denom:""}]})}function y(e){v.splice(e,1)}function C(e){v[e].coins.push({amount:"",denom:""})}function w(e,t){v[e].coins.splice(t,1)}function E(e){x(),e.target.classList.add("active")}function x(){let e=document.querySelectorAll(".from .input");e.forEach((e=>e.classList.remove("active")))}function R(e){e.target.closest(".from")||x()}async function X(){if(m.value=!0,K()){i.notify({group:"default",duration:-100,title:n.global.t("message.notification_multisend_process")});try{let e=[{address:t.Keplr.account.address,coins:[]}];v.forEach((t=>{t.coins.forEach((t=>{let n=e[0].coins.find((e=>e.denom==t.denom));n?n.amount=(parseFloat(n.amount)+parseFloat(t.amount)).toString():e[0].coins.push({amount:parseFloat(t.amount).toString(),denom:t.denom})}))}));let o={typeUrl:"/cosmos.bank.v1beta1.MsgMultiSend",value:{inputs:e,outputs:v}},a=await(0,u.Ar)([o],!0,t.currentNetwork),s=await(0,u.nw)(a);0===s.code?(i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_multisend_success_title"),type:"success",data:{chain:t.networks[t.currentNetwork].name,tx_type:n.global.t("message.notification_multisend_action"),tx_hash:s.transactionHash}}),t.isKeplrConnected||await t.initApp()):F(error)}catch(error){A.error(error),F(error)}}else i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_failed_validate_title"),text:n.global.t("message.notification_failed_validate_desc"),type:"error",data:{chain:t.networks[t.currentNetwork].name}});m.value=!1}function F(e){let o=e.message.match(/code (\d+(\.\d)*)/i),a="";a=o?n.global.t(`message.notification_tx_error_${o[1]}`):n.global.t("message.notification_tx_error_rejected"),i.notify({group:"default",clean:!0}),i.notify({group:"default",title:n.global.t("message.notification_failed_title"),text:a,type:"error",data:{chain:t.networks[t.currentNetwork].name,tx_type:n.global.t("message.notification_multisend_action")}})}function K(){let e=!0;return v.forEach((t=>{if(!t.address.length)return e=!1,e;t.coins.forEach((t=>t.denom.length&&t.amount.length&&"0"!=t.amount?void 0:(e=!1,e)))})),e}return(0,o.KC)((async()=>{t.isKeplrConnected||await t.initApp(),d.value=!1})),(0,o.sV)((()=>{document.addEventListener("click",R)})),(0,o.xo)((()=>{document.removeEventListener("click",R)})),(e,n)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",M,[(0,o.Lk)("div",W,(0,a.v_)(e.$t("message.multisend_form_page_title",{network:(0,s.R1)(t).networks[(0,s.R1)(t).currentNetwork].name})),1),(0,o.bF)(S)]),d.value?((0,o.uX)(),(0,o.Wv)(b,{key:0})):((0,o.uX)(),(0,o.CE)("form",{key:1,action:"",class:(0,a.C4)(["form",{processing:m.value}]),onSubmit:n[3]||(n[3]=(0,l.D$)((e=>X()),["prevent"]))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(v,((i,r)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:r},[r?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"delete_btn",onClick:e=>y(r)},q,8,j)):(0,o.Q3)("",!0),(0,o.Lk)("div",G,[(0,o.Lk)("div",H,(0,a.v_)(e.$t("message.multisend_form_to_address_label")),1),(0,o.Lk)("div",O,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.address=e,class:"input",onInput:e=>p(e,r)},null,40,z),[[l.Jo,i.address]])])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.coins,((i,c)=>((0,o.uX)(),(0,o.CE)("div",{class:"columns",key:c},[(0,o.Lk)("div",P,[(0,o.Lk)("div",T,(0,a.v_)(e.$t("message.multisend_form_from_label")),1),(0,o.Lk)("div",Y,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.denom=e,class:"input",onFocus:n[0]||(n[0]=(0,l.D$)((e=>E(e)),["self"]))},null,40,Z),[[l.Jo,i.denom]]),ee,(0,o.Lk)("div",te,[(0,o.Lk)("div",ne,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,s.R1)(t).balances,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},[(0,o.Lk)("button",{type:"button",class:"btn",onClick:(0,l.D$)((t=>L(r,c,e.denom)),["prevent"])},[(0,o.Lk)("div",ae,(0,a.v_)((0,s.R1)(u.mO)(e.base_denom)),1),(0,o.Lk)("div",se,(0,a.v_)((0,s.R1)(u.NJ)(e.amount,e.base_denom)),1)],8,oe)])))),128))])])])]),(0,o.Lk)("div",le,[(0,o.Lk)("div",ie,(0,a.v_)(e.$t("message.multisend_form_amount_label")),1),(0,o.Lk)("div",re,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>i.amount=e,class:"input",onInput:e=>_(e,r,c),placeholder:i.placeholder?i.placeholder:0,disabled:!i.denom.length},null,40,ce),[[l.Jo,i.amount]]),(0,o.Lk)("button",{type:"button",class:"max_btn",onClick:(0,l.D$)((e=>f(r,c)),["prevent"]),disabled:!i.denom.length},(0,a.v_)(e.$t("message.btn_max")),9,ue)])]),c?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"add_btn",onClick:e=>C(r)},ke,8,de)),c?((0,o.uX)(),(0,o.CE)("button",{key:1,type:"button",class:"delete_btn",onClick:e=>w(r,c)},_e,8,ve)):(0,o.Q3)("",!0)])))),128))])))),128)),(0,o.Lk)("div",fe,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":n[1]||(n[1]=e=>k.value=e),class:"input"},null,512),[[l.Jo,k.value]]),(0,o.Lk)("button",{type:"button",class:"btn",onClick:n[2]||(n[2]=e=>h())},(0,a.v_)(e.$t("message.btn_add")),1)]),(0,o.Lk)("div",be,[(0,o.Lk)("button",ge,(0,a.v_)(e.$t("message.btn_send")),1)])],34))],64))}};const he=(0,p.A)(Le,[["__scopeId","data-v-5c72beb0"]]);var ye=he}}]);
//# sourceMappingURL=638.fefd2a89.js.map